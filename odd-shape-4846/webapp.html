<!doctype html> <html> <head> <meta charset="utf-8" /> <title>Mini Checkout (Telegram WebApp)</title> </head> <body> <h3>Mini Checkout</h3> <div> <label>Name: <input id="name" value="John Doe"></label><br> <label>Phone: <input id="phone" value="+1-555-0000"></label><br> <label>Address: <input id="address" value="123 Example St, City, Country"></label><br> <label>Amount (USD): <input id="amount" value="9.99"></label><br> <button id="create-and-stripe">Pay Card (Stripe)</button> <button id="create-and-paypal">Pay with PayPal</button> <button id="create-and-ton">Pay with TON</button> </div> <script> async function createOrder() { const buyer = { name: document.getElementById('name').value, phone: document.getElementById('phone').value, address: document.getElementById('address').value }; const amount = Number(document.getElementById('amount').value); const resp = await fetch('/api/orders', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ amount, currency: 'USD', buyer }) }); const order = await resp.json(); return order; } document.getElementById('create-and-stripe').onclick = async () => { const order = await createOrder(); const resp = await fetch('/api/pay/stripe', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ orderId: order.id })}); const j = await resp.json(); if (j.url) { window.location.href = j.url; } else { alert('stripe error'); } }; document.getElementById('create-and-paypal').onclick = async () => { const order = await createOrder(); const resp = await fetch('/api/pay/paypal', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ orderId: order.id })}); const j = await resp.json(); if (j.url) { window.location.href = j.url; } else { alert('paypal error'); } }; document.getElementById('create-and-ton').onclick = async () => { const order = await createOrder(); const amountTon = prompt('Amount in TON (e.g. 0.05):', '0.05'); const resp = await fetch('/api/pay/ton', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ orderId: order.id, amountTon, merchantAddress: '' })}); const j = await resp.json(); if (j.deepLink) { const a = document.createElement('a'); a.href = j.deepLink; a.textContent = 'Open TON wallet to pay'; a.style.display = 'block'; document.body.appendChild(a); alert('Open your TON wallet using the link displayed to complete payment. After payment is confirmed, order will be marked paid by the listener.'); } else { alert('ton error'); } }; </script> </body> </html> ```